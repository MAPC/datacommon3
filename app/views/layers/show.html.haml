%h1= link_to "< Layers", layers_path

%h2= @layer.title
%p=  @layer.description

.row
  .col-sm-6.col-xs-12
    #map.tall
    .center

      .dropdown.btn-group
        %a.btn.btn-success.dropdown-toggle{href: '#', data: {toggle: "dropdown"}}
          %span.glyphicon.glyphicon-cloud-download
          Download Layer
          %span.caret
        %ul.dropdown-menu
          %li.dropdown-header Tabular
          %li= link_to 'CSV',  download_layer_path(format: :csv)
          %li= link_to 'JSON', download_layer_path(format: :json)
          %li.divider
          %li.dropdown-header Spatial (Not joined to tabular)
          %li.disabled= link_to 'GeoJSON',     ''
          %li.disabled= link_to 'PostGIS SQL', ''
          %li.disabled= link_to 'KML',         ''
          %li.disabled= link_to 'Shapefile',   ''
          

      .dropdown.btn-group
        %a.btn.btn-primary.dropdown-toggle{href: '#', data: {toggle: "dropdown"}}
          %span.glyphicon.glyphicon-list
          Download Metadata
          %span.caret
        %ul.dropdown-menu
          %li= link_to 'CSV (Spreadsheet)',  meta_layer_path(format: :csv)
          %li= link_to 'JSON',               meta_layer_path(format: :json)
          %li= link_to 'XML',                meta_layer_path(format: :xml)
          %li= link_to 'YAML',               meta_layer_path(format: :yaml)
          

  .col-sm-6.col-xs-12

    %table.metadata
      %tr
        %td.first Title
        %td #{@layer.title}
      %tr
        %td Subject
        %td #{@layer.subject}
      %tr
        %td Creator
        %td #{@layer.creator}
      %tr
        %td Last Updated
        %td #{@layer.moddate}
      %tr
        %td Publisher
        %td #{@layer.publisher}
      %tr
        %td Dates Available
        %td #{@layer.datesavail}
      %tr
        %td Spatial Coverage
        %td #{@layer.coverage}
      %tr
        %td
          Universe
          %br
          %small
            %a{href: '#'} What is a 'universe'?
        %td #{@layer.universe}
      %tr
        %td Table Name
        %td #{@layer.tablename}

:javascript

$(document).on('ready', function () {

  var map   = L.map('map', {scrollWheelZoom: false}).setView([42.3580, -71.0616], 12),
      tiles = L.tileLayer("http://tiles.mapc.org/basemap/{z}/{x}/{y}.png", {
          attribution: 'Tiles by <a href="http://www.mapc.org/" target="_blank">Metropolitan Area Planning Council</a>.',
          maxZoom:      17
    }).addTo(map);
});